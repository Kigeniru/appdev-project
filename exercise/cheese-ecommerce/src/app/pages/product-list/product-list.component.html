<!-- Page Header -->
<section class="page-header">
  <div class="container">
    <h1 class="page-title">Our Cheesecakes</h1>
    <p class="page-description">Discover our complete collection of artisanal cheesecakes, each one crafted with premium ingredients</p>
  </div>
</section>

<!-- Filters and Search -->
<section class="filters">
  <div class="container">
    <div class="filters-content">
      <!-- Search -->
      <div class="search-section">
        <div class="search-container">
          <input 
            type="text" 
            placeholder="Search cheesecakes..." 
            class="search-input"
            [(ngModel)]="searchTerm"
            (input)="onSearchChange(searchTerm)"
          >
          <button class="search-btn" aria-label="Search">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Category Filter -->
      <div class="filter-section">
        <label class="filter-label">Category:</label>
        <div class="category-filters">
          <button 
            *ngFor="let category of categories" 
            class="category-btn"
            [class.active]="selectedCategory === category"
            (click)="onCategoryChange(category)"
          >
            {{ category }}
          </button>
        </div>
      </div>

      <!-- Sort -->
      <div class="sort-section">
        <label class="sort-label">Sort by:</label>
        <select class="sort-select" [(ngModel)]="sortBy" (change)="onSortChange(sortBy)">
          <option value="name">Name</option>
          <option value="price-low">Price: Low to High</option>
          <option value="price-high">Price: High to Low</option>
          <option value="rating">Rating</option>
        </select>
      </div>
    </div>
  </div>
</section>

<!-- Products Grid -->
<section class="products">
  <div class="container">
    <div class="products-header">
        <p class="products-count">{{ filteredProducts.length }} cheesecakes found</p>
    </div>
    
    <div class="products-mosaic">
      <div 
        class="mosaic-card" 
        *ngFor="let product of filteredProducts; let i = index"
        [ngClass]="{ 'featured': i % 7 === 0 }"
      >
        <a class="mosaic-image" [routerLink]="['/product', product.id]">
          <img [src]="product.image" [alt]="product.name" />
          <span class="mosaic-badge" *ngIf="product.badge">{{ product.badge }}</span>
        </a>
        <div class="mosaic-info">
          <div class="mosaic-top">
            <div class="mosaic-category">{{ product.category }}</div>
            <div class="mosaic-price">
              <span class="current">‚Ç±{{ product.price | number }}</span>
              <span class="original" *ngIf="product.originalPrice">‚Ç±{{ product.originalPrice | number }}</span>
            </div>
          </div>
          <h3 class="mosaic-name">{{ product.name }}</h3>
          <p class="mosaic-desc">{{ product.description }}</p>
        </div>
        <div class="mosaic-actions">
          <button 
            class="btn btn-primary"
            [disabled]="!product.inStock"
            [class.disabled]="!product.inStock"
            (click)="addToCart(product)"
          >
            {{ product.inStock ? 'Add to Cart' : 'Out of Stock' }}
          </button>
        </div>
      </div>
    </div>

    <!-- No Products Message -->
    <div class="no-products" *ngIf="filteredProducts.length === 0">
      <div class="no-products-content">
        <div class="no-products-icon">üîç</div>
        <h3 class="no-products-title">No cheesecakes found</h3>
        <p class="no-products-description">
          Try adjusting your search or filter criteria to find the perfect cheesecake for you.
        </p>
        <button class="btn btn-secondary" (click)="onCategoryChange('All'); searchTerm = ''">
          Clear Filters
        </button>
      </div>
    </div>
  </div>
</section>
